<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Highland Fresh - Dairy Product Management</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/styles.css">
    <style>
        /* Enhanced Category Dropdown Styles */
        .category-hierarchy {
            font-family: monospace;
            font-size: 0.9rem;
        }
        .category-hierarchy .category-item {
            padding: 0.5rem;
            border-left: 3px solid transparent;
            margin-bottom: 0.25rem;
        }
        .category-hierarchy .category-item.level-1 {
            border-left-color: #198754;
            background-color: #f8f9fa;
        }
        .category-hierarchy .category-item.level-2 {
            border-left-color: #0dcaf0;
            background-color: #e7f3ff;
            margin-left: 1rem;
        }
        .category-hierarchy .category-item.level-3 {
            border-left-color: #ffc107;
            background-color: #fff3cd;
            margin-left: 2rem;
        }
        .category-option-indent {
            padding-left: 20px;
            font-style: italic;
        }
        .category-option-indent.level-2 {
            padding-left: 40px;
        }
        .category-option-indent.level-3 {
            padding-left: 60px;
        }
        .category-stats {
            font-size: 0.75rem;
            color: #6c757d;
        }
        .dropdown-toggle::after {
            margin-left: 0.5rem;
        }
        /* Quick add category highlight */
        .quick-add-highlight {
            animation: highlightPulse 2s ease-in-out;
        }
        @keyframes highlightPulse {
            0%, 100% { background-color: transparent; }
            50% { background-color: #d1edff; }
        }

        /* Category table alignment fixes */
        #categoryModal .table-responsive {
            min-height: 300px;
        }
        
        #categoryModal .table {
            margin-bottom: 0;
            table-layout: fixed;
        }
        
        #categoryModal .table th,
        #categoryModal .table td {
            vertical-align: middle;
            padding: 0.75rem 0.5rem;
            overflow-wrap: break-word;
        }
        
        #categoryModal .table th {
            font-weight: 600;
            border-bottom: 2px solid #dee2e6;
            white-space: nowrap;
            font-size: 0.875rem;
        }
        
        #categoryModal .btn-group-sm .btn {
            padding: 0.25rem 0.4rem;
            font-size: 0.75rem;
        }
        
        #categoryModal .badge {
            font-size: 0.75rem;
        }
        
        /* Ensure status column content is properly aligned */
        #categoryModal .table td:nth-child(5) {
            text-align: center;
        }
        
        /* Actions column alignment */
        #categoryModal .table td:nth-child(7) {
            text-align: center;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
        <div class="container">
            <a class="navbar-brand fw-bold" href="admin-dashboard.html">
                <img src="../images/highland_fresh_logo.jpg" alt="Highland Fresh Logo" class="navbar-logo">
                Highland Fresh - Dairy Product Management
            </a>
            <div class="navbar-nav ms-auto">
                <span class="navbar-text me-3" id="userWelcome">Welcome, Admin!</span>
                <a href="admin-dashboard.html" class="btn btn-outline-secondary btn-sm me-2">Dashboard</a>
                <button class="btn btn-outline-danger btn-sm" onclick="logout()">Logout</button>
            </div>
        </div>
    </nav>
    <div class="container mt-4">
        <div class="row">
            <div class="col-12">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2 class="text-success mb-0">Highland Fresh Dairy Products</h2>
                    <div>
                        <button class="btn btn-outline-success me-2" data-bs-toggle="modal" data-bs-target="#categoryModal" onclick="openCategoryManagementModal()">
                            <i class="bi bi-tags"></i> Manage Categories
                        </button>
                        <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#productModal" onclick="openAddProductModal()">
                            <i class="bi bi-plus-circle"></i> Add Product
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div id="alertContainer" class="toast-container position-fixed top-0 end-0 p-3" style="z-index: 1055;"></div>
        <div id="loadingSpinner" class="text-center d-none">
            <div class="spinner-border text-success" role="status">
                <span class="visually-hidden">Loading products...</span>
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-body">
                        <div class="table-container">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead class="table-light">
                                        <tr>
                                            <th>Product Name</th>
                                            <th>Barcode</th>
                                            <th>Category</th>
                                            <th>Supplier</th>
                                            <th>Price</th>
                                            <th>Stock</th>
                                            <th>Reorder Level</th>
                                            <th>Expiry</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="productsTableBody">
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div id="emptyState" class="text-center py-5 d-none">
                            <i class="bi bi-box text-muted" style="font-size: 3rem;"></i>
                            <h5 class="text-muted mt-3">No products found</h5>
                            <p class="text-muted">Start by adding your first product to the catalog.</p>
                            <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#productModal" onclick="openAddProductModal()">
                                <i class="bi bi-plus-circle"></i> Add First Product
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="productModal" tabindex="-1" aria-labelledby="productModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="productModalLabel">Add Highland Fresh Dairy Product</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form id="productForm">
                    <div class="modal-body">
                        <div class="alert alert-info d-none" id="newProductInfo">
                            <i class="bi bi-info-circle"></i> <strong>Adding New Product:</strong> 
                            New Highland Fresh products are automatically set to "Active" status and ready for sale.
                        </div>
                        <input type="hidden" id="productId" name="productId">
                        <div class="row">
                            <div class="col-md-8">
                                <div class="mb-3">
                                    <label for="productName" class="form-label">Highland Fresh Product Name</label>
                                    <input type="text" class="form-control" id="productName" name="productName" required>
                                    <div class="invalid-feedback"></div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="barcode" class="form-label">Barcode</label>
                                    <input type="text" class="form-control" id="barcode" name="barcode" required>
                                    <div class="invalid-feedback"></div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12">
                                <div class="mb-3">
                                    <label for="description" class="form-label">Description</label>
                                    <textarea class="form-control" id="description" name="description" rows="3"></textarea>
                                    <div class="invalid-feedback"></div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="category" class="form-label">Dairy Product Category</label>
                                    <div class="input-group">
                                        <select class="form-select" id="category" name="category" required>
                                            <option value="">Select Category</option>
                                        </select>
                                        <button class="btn btn-outline-secondary dropdown-toggle" type="button" 
                                                data-bs-toggle="dropdown" aria-expanded="false" title="Category Options">
                                            <i class="bi bi-three-dots-vertical"></i>
                                        </button>
                                        <ul class="dropdown-menu">
                                            <li>
                                                <a class="dropdown-item" href="#" onclick="openQuickAddCategory()">
                                                    <i class="bi bi-plus-circle text-success"></i> Quick Add Category
                                                </a>
                                            </li>
                                            <li>
                                                <a class="dropdown-item" href="#" onclick="openCategoryManagementFromDropdown()">
                                                    <i class="bi bi-gear text-primary"></i> Manage Categories
                                                </a>
                                            </li>
                                            <li><hr class="dropdown-divider"></li>
                                            <li>
                                                <a class="dropdown-item" href="#" onclick="refreshCategoryDropdown()">
                                                    <i class="bi bi-arrow-clockwise text-info"></i> Refresh Categories
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="invalid-feedback"></div>
                                    <div class="form-text">
                                        <small class="text-muted">
                                            <span id="categoryStats"></span>
                                            <a href="#" onclick="showCategoryHierarchy()" class="ms-2">View Hierarchy</a>
                                        </small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="unit" class="form-label">Unit</label>
                                    <select class="form-select" id="unit" name="unit" required>
                                        <option value="">Select Unit</option>
                                        <option value="piece">Piece</option>
                                        <option value="kg">Kilogram</option>
                                        <option value="gram">Gram</option>
                                        <option value="liter">Liter</option>
                                        <option value="bottle">Bottle</option>
                                        <option value="pack">Pack</option>
                                        <option value="box">Box</option>
                                    </select>
                                    <div class="invalid-feedback"></div>
                                </div>
                            </div>
                            <div class="col-md-4" id="statusFieldContainer" style="display: none;">
                                <div class="mb-3">
                                    <label for="status" class="form-label">Status</label>
                                    <select class="form-select" id="status" name="status">
                                        <option value="active">Active</option>
                                        <option value="inactive">Inactive</option>
                                    </select>
                                    <div class="invalid-feedback"></div>
                                    <div class="form-text">
                                        <small class="text-muted">Change status to inactive to disable this product</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="unitPrice" class="form-label">Unit Price (₱)</label>
                                    <input type="number" class="form-control" id="unitPrice" name="unitPrice" step="0.01" min="0" required>
                                    <div class="invalid-feedback"></div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="stockQuantity" class="form-label">Stock Quantity</label>
                                    <input type="number" class="form-control" id="stockQuantity" name="stockQuantity" min="0" required>
                                    <div class="invalid-feedback"></div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="reorderLevel" class="form-label">Reorder Level</label>
                                    <input type="number" class="form-control" id="reorderLevel" name="reorderLevel" min="0">
                                    <div class="invalid-feedback"></div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="expiryDate" class="form-label">Expiry Date</label>
                                    <input type="date" class="form-control" id="expiryDate" name="expiryDate">
                                    <div class="invalid-feedback"></div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="supplier" class="form-label">Supplier</label>
                                    <select class="form-select" id="supplier" name="supplier">
                                        <option value="">Select Supplier</option>
                                    </select>
                                    <div class="invalid-feedback"></div>
                                </div>
                            </div>
                        </div>

                        <hr class="my-4">
                        <h6 class="text-success mb-3"><i class="bi bi-droplet-half"></i> Highland Fresh Dairy Information</h6>
                        
                        <div class="row">
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="milkSourceCooperative" class="form-label">Milk Source Cooperative</label>
                                    <select class="form-select" id="milkSourceCooperative" name="milkSourceCooperative">
                                        <option value="">Select Cooperative</option>
                                        <option value="Dalwangan Dairy Cooperative">Dalwangan Dairy Cooperative</option>
                                        <option value="Misamis Oriental Dairy Coop">Misamis Oriental Dairy Coop</option>
                                        <option value="Bukidnon Dairy Cooperative">Bukidnon Dairy Cooperative</option>
                                        <option value="Cagayan de Oro Dairy Alliance">Cagayan de Oro Dairy Alliance</option>
                                        <option value="Malaybalay Cheese Artisans">Malaybalay Cheese Artisans</option>
                                        <option value="Iligan Dairy Cooperative">Iligan Dairy Cooperative</option>
                                    </select>
                                    <div class="invalid-feedback"></div>
                                    <div class="form-text">Which dairy cooperative/farm provided the milk</div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="batchLotNumber" class="form-label">Batch/Lot Number</label>
                                    <input type="text" class="form-control" id="batchLotNumber" name="batchLotNumber" placeholder="e.g., HF-20250816-001">
                                    <div class="invalid-feedback"></div>
                                    <div class="form-text">For quality traceability</div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="productionDate" class="form-label">Production Date</label>
                                    <input type="date" class="form-control" id="productionDate" name="productionDate">
                                    <div class="invalid-feedback"></div>
                                    <div class="form-text">When product was processed</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-3">
                                <div class="mb-3">
                                    <label for="coldChainTempMin" class="form-label">Min Storage Temp (°C)</label>
                                    <input type="number" class="form-control" id="coldChainTempMin" name="coldChainTempMin" step="0.1" placeholder="e.g., 2.0">
                                    <div class="invalid-feedback"></div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="mb-3">
                                    <label for="coldChainTempMax" class="form-label">Max Storage Temp (°C)</label>
                                    <input type="number" class="form-control" id="coldChainTempMax" name="coldChainTempMax" step="0.1" placeholder="e.g., 6.0">
                                    <div class="invalid-feedback"></div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="mb-3">
                                    <label for="qualityGrade" class="form-label">Quality Grade</label>
                                    <select class="form-select" id="qualityGrade" name="qualityGrade">
                                        <option value="Standard">Standard</option>
                                        <option value="Premium">Premium</option>
                                        <option value="Economy">Economy</option>
                                    </select>
                                    <div class="invalid-feedback"></div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="mb-3">
                                    <label for="processingMethod" class="form-label">Processing Method</label>
                                    <select class="form-select" id="processingMethod" name="processingMethod">
                                        <option value="">Select Method</option>
                                        <option value="Pasteurized">Pasteurized</option>
                                        <option value="Fermented">Fermented</option>
                                        <option value="Aged">Aged</option>
                                        <option value="Churned">Churned</option>
                                        <option value="Blended">Blended</option>
                                        <option value="Hot Prepared">Hot Prepared</option>
                                    </select>
                                    <div class="invalid-feedback"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="seasonalAvailability" class="form-label">Seasonal Availability</label>
                                    <select class="form-select" id="seasonalAvailability" name="seasonalAvailability">
                                        <option value="Year-round">Year-round</option>
                                        <option value="Summer season only">Summer season only</option>
                                        <option value="Available during harvest season">Available during harvest season</option>
                                        <option value="Holiday special">Holiday special</option>
                                        <option value="Limited seasonal">Limited seasonal</option>
                                    </select>
                                    <div class="invalid-feedback"></div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="milkBarSizeCategory" class="form-label">Milk Bar Size Category</label>
                                    <select class="form-select" id="milkBarSizeCategory" name="milkBarSizeCategory">
                                        <option value="">Not a milk bar beverage</option>
                                        <option value="Small">Small (200-250ml)</option>
                                        <option value="Regular">Regular (300-350ml)</option>
                                        <option value="Large">Large (500ml+)</option>
                                        <option value="Family">Family (1L+)</option>
                                        <option value="Bulk">Bulk (5L+)</option>
                                    </select>
                                    <div class="invalid-feedback"></div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3 form-check mt-4">
                                    <input type="checkbox" class="form-check-input" id="institutionalPackaging" name="institutionalPackaging">
                                    <label class="form-check-label" for="institutionalPackaging">
                                        Bulk/Institutional Packaging
                                    </label>
                                    <div class="form-text">Check if this is for schools, hotels, or wholesale</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-4" id="volumeFieldContainer" style="display: none;">
                                <div class="mb-3">
                                    <label for="volumeMl" class="form-label">Volume (ml)</label>
                                    <input type="number" class="form-control" id="volumeMl" name="volumeMl" min="0" placeholder="For liquid products">
                                    <div class="invalid-feedback"></div>
                                    <div class="form-text">Volume in milliliters for liquid products</div>
                                </div>
                            </div>
                            <div class="col-md-4" id="weightFieldContainer" style="display: none;">
                                <div class="mb-3">
                                    <label for="weightGrams" class="form-label">Weight (grams)</label>
                                    <input type="number" class="form-control" id="weightGrams" name="weightGrams" step="0.01" min="0" placeholder="For solid products">
                                    <div class="invalid-feedback"></div>
                                    <div class="form-text">Weight in grams for cheese, butter, etc.</div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="cost" class="form-label">Production Cost (₱)</label>
                                    <input type="number" class="form-control" id="cost" name="cost" step="0.01" min="0">
                                    <div class="invalid-feedback"></div>
                                    <div class="form-text">Cost to produce this product</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-success" id="saveProductBtn">
                            <span class="spinner-border spinner-border-sm d-none me-2" id="saveSpinner"></span>
                            Save Product
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="deleteModalLabel">Confirm Delete</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Are you sure you want to delete this product?</p>
                    <div class="alert alert-warning">
                        <strong>Product:</strong> <span id="deleteProductName"></span><br>
                        <strong>Barcode:</strong> <span id="deleteProductBarcode"></span>
                    </div>
                    <p class="text-danger"><small>This action cannot be undone.</small></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger" id="confirmDeleteBtn">
                        <span class="spinner-border spinner-border-sm d-none" id="deleteSpinner"></span>
                        Delete Product
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="categoryModal" tabindex="-1" aria-labelledby="categoryModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="categoryModalLabel">Category Management</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <ul class="nav nav-tabs" id="categoryTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="categories-list-tab" data-bs-toggle="tab" data-bs-target="#categories-list" type="button" role="tab" aria-controls="categories-list" aria-selected="true">
                                <i class="bi bi-list-ul"></i> Categories
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="add-category-tab" data-bs-toggle="tab" data-bs-target="#add-category" type="button" role="tab" aria-controls="add-category" aria-selected="false">
                                <i class="bi bi-plus-circle"></i> Add Category
                            </button>
                        </li>
                    </ul>
                    <div class="tab-content mt-3" id="categoryTabContent">
                        <div class="tab-pane fade show active" id="categories-list" role="tabpanel" aria-labelledby="categories-list-tab">
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <div class="input-group">
                                        <span class="input-group-text"><i class="bi bi-search"></i></span>
                                        <input type="text" class="form-control" id="categorySearch" placeholder="Search categories...">
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <select class="form-select" id="categoryStatusFilter">
                                        <option value="">All Status</option>
                                        <option value="1">Active</option>
                                        <option value="0">Inactive</option>
                                    </select>
                                </div>
                                <div class="col-md-3">
                                    <button class="btn btn-outline-secondary w-100" onclick="refreshCategoriesList()">
                                        <i class="bi bi-arrow-clockwise"></i> Refresh
                                    </button>
                                </div>
                            </div>
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead class="table-light">
                                        <tr>
                                            <th style="width: 20%;">Category Name</th>
                                            <th style="width: 25%;">Description</th>
                                            <th style="width: 15%;">Parent Category</th>
                                            <th style="width: 12%;">Products</th>
                                            <th style="width: 12%;">Status</th>
                                            <th style="width: 10%;">Created</th>
                                            <th style="width: 6%;">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="categoriesTableBody">
                                    </tbody>
                                </table>
                            </div>
                            <div id="categoriesLoading" class="text-center py-4 d-none">
                                <div class="spinner-border text-success" role="status">
                                    <span class="visually-hidden">Loading categories...</span>
                                </div>
                            </div>
                            <div id="categoriesEmpty" class="text-center py-5 d-none">
                                <i class="bi bi-tags text-muted" style="font-size: 3rem;"></i>
                                <h5 class="text-muted mt-3">No categories found</h5>
                                <p class="text-muted">Create your first product category to organize your inventory.</p>
                                <button class="btn btn-success" onclick="switchToCategoryForm()">
                                    <i class="bi bi-plus-circle"></i> Add First Category
                                </button>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="add-category" role="tabpanel" aria-labelledby="add-category-tab">
                            <form id="categoryForm" novalidate>
                                <input type="hidden" id="categoryId" name="categoryId">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label for="categoryName" class="form-label">Category Name <span class="text-danger">*</span></label>
                                            <input type="text" class="form-control" id="categoryName" name="categoryName" required maxlength="100">
                                            <div class="invalid-feedback"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="categoryDescription" class="form-label">Description</label>
                                    <textarea class="form-control" id="categoryDescription" name="categoryDescription" rows="3" maxlength="255" placeholder="Optional description for this category..."></textarea>
                                    <div class="form-text">Maximum 255 characters</div>
                                    <div class="invalid-feedback"></div>
                                </div>
                                <div class="mb-3">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="categoryActive" name="categoryActive" checked>
                                        <label class="form-check-label" for="categoryActive">
                                            Active
                                        </label>
                                    </div>
                                    <small class="form-text text-muted">Inactive categories won't appear in product forms</small>
                                </div>
                                <div class="d-flex justify-content-between">
                                    <div>
                                        <button type="button" class="btn btn-outline-secondary" onclick="resetCategoryForm()">
                                            <i class="bi bi-arrow-clockwise"></i> Reset
                                        </button>
                                    </div>
                                    <div>
                                        <button type="button" class="btn btn-secondary me-2" onclick="switchToCategoriesList()">
                                            <i class="bi bi-list-ul"></i> Back to List
                                        </button>
                                        <button type="submit" class="btn btn-success" id="saveCategoryBtn">
                                            <span class="spinner-border spinner-border-sm d-none" id="categorySaveSpinner"></span>
                                            <i class="bi bi-check-circle"></i> <span id="saveCategoryText">Save Category</span>
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="deleteCategoryModal" tabindex="-1" aria-labelledby="deleteCategoryModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="deleteCategoryModalLabel">Confirm Category Deletion</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="categoryDeleteContent">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-warning me-2" id="softDeleteCategoryBtn">
                        <span class="spinner-border spinner-border-sm d-none" id="softDeleteSpinner"></span>
                        Deactivate
                    </button>
                    <button type="button" class="btn btn-danger" id="hardDeleteCategoryBtn">
                        <span class="spinner-border spinner-border-sm d-none" id="hardDeleteSpinner"></span>
                        Permanently Delete
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="quickAddCategoryModal" tabindex="-1" aria-labelledby="quickAddCategoryModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="quickAddCategoryModalLabel">
                        <i class="bi bi-plus-circle text-success"></i> Quick Add Category
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form id="quickAddCategoryForm">
                    <div class="modal-body">
                        <div class="alert alert-info">
                            <small><i class="bi bi-info-circle"></i> Add a new category quickly while creating a product.</small>
                        </div>
                        <div class="mb-3">
                            <label for="quickCategoryName" class="form-label">Category Name *</label>
                            <input type="text" class="form-control" id="quickCategoryName" 
                                   name="quickCategoryName" required maxlength="100"
                                   placeholder="Enter category name">
                            <div class="invalid-feedback"></div>
                        </div>
                        <div class="mb-3">
                            <label for="quickCategoryDescription" class="form-label">Description</label>
                            <textarea class="form-control" id="quickCategoryDescription" 
                                      name="quickCategoryDescription" rows="2" maxlength="255"
                                      placeholder="Optional description"></textarea>
                            <div class="invalid-feedback"></div>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="quickCategoryActive" 
                                   name="quickCategoryActive" checked>
                            <label class="form-check-label" for="quickCategoryActive">
                                Active
                            </label>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-success">
                            <span class="spinner-border spinner-border-sm d-none me-2" role="status"></span>
                            <i class="bi bi-plus-circle"></i> Add Category
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="modal fade" id="categoryHierarchyModal" tabindex="-1" aria-labelledby="categoryHierarchyModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="categoryHierarchyModalLabel">
                        <i class="bi bi-diagram-3 text-info"></i> Category Hierarchy
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-info">
                        <small><i class="bi bi-info-circle"></i> View the organizational structure of your categories.</small>
                    </div>
                    <div id="categoryHierarchyTree" class="category-hierarchy">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" onclick="openCategoryManagementFromHierarchy()">
                        <i class="bi bi-gear"></i> Manage Categories
                    </button>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios@1.6.0/dist/axios.min.js"></script>
    <script src="../js/api-handler.js"></script>
    <script src="../js/validation-utils.js"></script>
    <script src="../js/dashboard.js"></script>
    <script src="../js/products/ProductAPI.js"></script>
    <script src="../js/products/ProductRenderer.js"></script>
    <script src="../js/products/ProductAnimations.js"></script>
    <script src="../js/products/ProductModal.js"></script>
    <script src="../js/products/ProductManager.js"></script>
    <script src="../js/categories/CategoryAPI.js"></script>
    <script src="../js/categories/CategoryRenderer.js"></script>
    <script src="../js/categories/CategoryModal.js"></script>
    <script src="../js/categories/CategoryManager.js"></script>
    <script src="../js/products.js"></script>
</body>
</html>